<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="static/jq/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="static/jq/ajaxfileupload.js"></script>
</head>
<body>
<form id="sellerSearch" name="sellerSearch">
    模糊搜索框 <input type="text" id="search" name="search" value="">
    <input type="button" onclick="searchEvaluation()" value="搜索"><br>
    日期
    <input type="date" id="date" name="date" value=""><br>
    <input type="hidden" id="sellerId" name="sellerId" value="2000000"/>
    <select id="condition">
        <option value="商店">商店</option>
        <option value="商品">商品</option>
        <option value="评级">评级</option>
        <option value="评论">评论</option>
    </select>
</form>
<br>

<table id="show">
    <tbody>
    <tr>
        <td>商品</td>
        <td>商店</td>
        <td>买家</td>
        <td>评论</td>
        <td>评级</td>
        <td>图片</td>
        <td>时间</td>
        <td>详情(价格)</td>
        <td>详情(买家留言)</td>
    </tr>
    </tbody>
</table>

</body>
</html>
<script type="text/javascript">
    function searchEvaluation() {
        console.log('submit');
        var id = $("#sellerId").val().parseInt();
        alert(id);
        var search = $('#search').val();
        var date = $('#date').val();
        var condition = $('#condition').val();
        alert(id+""+search+""+condition+""+date);
        $.ajax({
            contentType: 'application/json;charset=UTF-8',   //定义编码
            url: '/evaluate/searchEvaluation',
            type: 'post',
            data: {sellerId:sellerId, search:search, date:date, condition:condition},
            success: function (result) {
                var s = "";
                alert("成功");
                $.each(result.data, function (i, v) {
                    s += "<tr><td>" + v.evaluateVo.items.iName;
                    s += "</td><td>" + v.store.stName + "</td><td>" + v.evaluateVo.user.uUserName;
                    s += "</td><td>" + v.evaluateVo.evaluate.eDescription + "</td><td>" + v.evaluateVo.evaluate.eLevel;
                    s += "</td><td>" + v.evaluateVo.evaluate.ePhotos + "</td><td>" + v.order.oDate;
                    s += "</td><td>" + v.order.oPrice + "</td><td>" + v.order.oMessage + "</td></tr>";
                })
                alert(s1);
                $("#show").first("tr").append(s);
            }, error: function () {
                var s = "评论加载失败";
                alert(s);
            }
        });
    }
</script>
